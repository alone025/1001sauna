import { useEffect, useState } from "react";

interface Props {
  telModal: () => void;
  brond: () => void;
  disabled: boolean;
}

const BottomMenu = ({ telModal, brond, disabled }: Props) => {
  const [hash, setHash] = useState(window.location.hash);
  const [lastScrollY, setLastScrollY] = useState(0);


  useEffect(() => {
   
    const handleHashChange = () => {
      setHash(window.location.hash);
    };

   

    const handleScroll = () => {
      const currentScrollY = window.scrollY;

      if (currentScrollY > lastScrollY && currentScrollY > 1200 && window.location.hash) {
        window.history.replaceState(null, '', window.location.pathname + window.location.search);
        setHash('')
      }
      setLastScrollY(currentScrollY);
    };

    window.addEventListener('scroll', handleScroll);
    window.addEventListener("hashchange", handleHashChange);

    return () => {
      window.removeEventListener("hashchange", handleHashChange);
      window.removeEventListener('scroll', handleScroll);
      
    };
  }, []);

  const updateHash = (newHash: string) => {
    if (window.location.hash !== newHash) {
      window.location.hash = newHash;
    }
  };

  return (
    <div className="bottom-menu-lkm z-20 fixed w-full left-0 bottom-0 bg-white shadow-sm flex sm:hidden flex-row justify-between px-4 pt-3 pb-4">
      <div onClick={telModal} className="klj flex flex-col gap-1 items-center justify-center">
        <svg
          className="hover:text-[#FF7A01]"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
        >
          <path
            d="M21.9999 16.9201V19.9201C22.0011 20.1986 21.944 20.4743 21.8324 20.7294C21.7209 20.9846 21.5572 21.2137 21.352 21.402C21.1468 21.5902 20.9045 21.7336 20.6407 21.8228C20.3769 21.912 20.0973 21.9452 19.8199 21.9201C16.7428 21.5857 13.7869 20.5342 11.1899 18.8501C8.77376 17.3148 6.72527 15.2663 5.18993 12.8501C3.49991 10.2413 2.44818 7.27109 2.11993 4.1801C2.09494 3.90356 2.12781 3.62486 2.21643 3.36172C2.30506 3.09859 2.4475 2.85679 2.6347 2.65172C2.82189 2.44665 3.04974 2.28281 3.30372 2.17062C3.55771 2.05843 3.83227 2.00036 4.10993 2.0001H7.10993C7.59524 1.99532 8.06572 2.16718 8.43369 2.48363C8.80166 2.80008 9.04201 3.23954 9.10993 3.7201C9.23656 4.68016 9.47138 5.62282 9.80993 6.5301C9.94448 6.88802 9.9736 7.27701 9.89384 7.65098C9.81408 8.02494 9.6288 8.36821 9.35993 8.6401L8.08993 9.9101C9.51349 12.4136 11.5864 14.4865 14.0899 15.9101L15.3599 14.6401C15.6318 14.3712 15.9751 14.1859 16.3491 14.1062C16.723 14.0264 17.112 14.0556 17.4699 14.1901C18.3772 14.5286 19.3199 14.7635 20.2799 14.8901C20.7657 14.9586 21.2093 15.2033 21.5265 15.5776C21.8436 15.9519 22.0121 16.4297 21.9999 16.9201Z"
            stroke="#3B4255"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
          />
        </svg>
        <p className="text-[10px] hover:text-[#FF7A01] font-Inter text-[#3B4255] font-normal">Телефон</p>
      </div>
      <div
        onClick={brond}
        className={`klj flex flex-col gap-1 items-center justify-center ${
          disabled ? "opacity-40 cursor-not-allowed pointer-events-none" : ""
        }`}
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none">
          <path
            d="M19.5 4H5.5C4.39543 4 3.5 4.89543 3.5 6V20C3.5 21.1046 4.39543 22 5.5 22H19.5C20.6046 22 21.5 21.1046 21.5 20V6C21.5 4.89543 20.6046 4 19.5 4Z"
            stroke="#3B4255"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
          />
          <path d="M16.5 2V6" stroke="#3B4255" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          <path d="M8.5 2V6" stroke="#3B4255" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          <path d="M3.5 10H21.5" stroke="#3B4255" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
        </svg>
        <p className="text-[10px] font-Inter text-[#3B4255] font-normal">Бронь</p>
      </div>
      <div
        onClick={() => updateHash("#price_ml")}
        className="klj group flex flex-col gap-1 items-center justify-center"
      >
        {hash === "#price_ml" ? (
         <svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none">
         <path d="M14.7424 13.6875H5V11.7539H14.7424C15.6417 11.7539 16.3849 11.6074 16.9719 11.3145C17.5589 11.0156 17.9961 10.6113 18.2834 10.1016C18.5706 9.58594 18.7143 9 18.7143 8.34375C18.7143 7.6875 18.5706 7.10449 18.2834 6.59473C17.9961 6.0791 17.5589 5.67481 16.9719 5.38184C16.3849 5.08301 15.6417 4.93359 14.7424 4.93359H10.3583V21H8.03513V3H14.7424C16.1663 3 17.3404 3.24316 18.2646 3.72949C19.1889 4.21582 19.8759 4.86328 20.3255 5.67188C20.7752 6.48047 21 7.37109 21 8.34375C21 9.31641 20.7752 10.207 20.3255 11.0156C19.8759 11.8242 19.1889 12.4717 18.2646 12.958C17.3404 13.4443 16.1663 13.6875 14.7424 13.6875ZM14.5925 15.375V17.3086H5V15.375H14.5925Z" fill="#FF7A01"/>
       </svg>
        ) : (
          <svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none">
          <path d="M14.7424 13.6875H5V11.7539H14.7424C15.6417 11.7539 16.3849 11.6074 16.9719 11.3145C17.5589 11.0156 17.9961 10.6113 18.2834 10.1016C18.5706 9.58594 18.7143 9 18.7143 8.34375C18.7143 7.6875 18.5706 7.10449 18.2834 6.59473C17.9961 6.0791 17.5589 5.67481 16.9719 5.38184C16.3849 5.08301 15.6417 4.93359 14.7424 4.93359H10.3583V21H8.03513V3H14.7424C16.1663 3 17.3404 3.24316 18.2646 3.72949C19.1889 4.21582 19.8759 4.86328 20.3255 5.67188C20.7752 6.48047 21 7.37109 21 8.34375C21 9.31641 20.7752 10.207 20.3255 11.0156C19.8759 11.8242 19.1889 12.4717 18.2646 12.958C17.3404 13.4443 16.1663 13.6875 14.7424 13.6875ZM14.5925 15.375V17.3086H5V15.375H14.5925Z" fill="#3B4255"/>
        </svg>
        )}
        <p className={`text-[10px]  font-Inter ${hash === "#price_ml" ? 'text-[#FF7A01]': `text-[#3B4255]`}  font-normal`}>Цена</p>
      </div>

      <div
        onClick={() => updateHash("#photo_ml")}
        className="klj group flex flex-col gap-1 items-center justify-center"
      >
        {hash === "#photo_ml" ? (
        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none">
        <path d="M9.5 22H15.5C20.5 22 22.5 20 22.5 15V9C22.5 4 20.5 2 15.5 2H9.5C4.5 2 2.5 4 2.5 9V15C2.5 20 4.5 22 9.5 22Z" stroke="#FF7A01" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M9.5 10C10.6046 10 11.5 9.10457 11.5 8C11.5 6.89543 10.6046 6 9.5 6C8.39543 6 7.5 6.89543 7.5 8C7.5 9.10457 8.39543 10 9.5 10Z" stroke="#FF7A01" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M3.16992 18.9501L8.09992 15.6401C8.88992 15.1101 10.0299 15.1701 10.7399 15.7801L11.0699 16.0701C11.8499 16.7401 13.1099 16.7401 13.8899 16.0701L18.0499 12.5001C18.8299 11.8301 20.0899 11.8301 20.8699 12.5001L22.4999 13.9001" stroke="#FF7A01" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
        ) : (
          <svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none">
          <path d="M9.5 22H15.5C20.5 22 22.5 20 22.5 15V9C22.5 4 20.5 2 15.5 2H9.5C4.5 2 2.5 4 2.5 9V15C2.5 20 4.5 22 9.5 22Z" stroke="#3B4255" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M9.5 10C10.6046 10 11.5 9.10457 11.5 8C11.5 6.89543 10.6046 6 9.5 6C8.39543 6 7.5 6.89543 7.5 8C7.5 9.10457 8.39543 10 9.5 10Z" stroke="#3B4255" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M3.16992 18.9501L8.09992 15.6401C8.88992 15.1101 10.0299 15.1701 10.7399 15.7801L11.0699 16.0701C11.8499 16.7401 13.1099 16.7401 13.8899 16.0701L18.0499 12.5001C18.8299 11.8301 20.0899 11.8301 20.8699 12.5001L22.4999 13.9001" stroke="#3B4255" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        )}
        <p className={`text-[10px]  font-Inter ${hash === "#photo_ml" ? 'text-[#FF7A01]': `text-[#3B4255]`}  font-normal`}>Фото</p>
      </div>

      <div
        onClick={() => updateHash("#contactss_ml")}
        className="klj group flex flex-col gap-1 items-center justify-center"
      >
        {hash === "#contactss_ml" ? (
      <svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none">
      <g clip-path="url(#clip0_1943_3357)">
        <path d="M1.5 6V22L8.5 18L16.5 22L23.5 18V2L16.5 6L8.5 2L1.5 6Z" stroke="#FF7A01" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M8.5 2V18" stroke="#FF7A01" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M16.5 6V22" stroke="#FF7A01" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </g>
      <defs>
        <clipPath id="clip0_1943_3357">
          <rect width="24" height="24" fill="white" transform="translate(0.5)"/>
        </clipPath>
      </defs>
    </svg>
        ) : (
          <svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none">
          <g clip-path="url(#clip0_1943_3357)">
            <path d="M1.5 6V22L8.5 18L16.5 22L23.5 18V2L16.5 6L8.5 2L1.5 6Z" stroke="#3B4255" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M8.5 2V18" stroke="#3B4255" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M16.5 6V22" stroke="#3B4255" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </g>
          <defs>
            <clipPath id="clip0_1943_3357">
              <rect width="24" height="24" fill="white" transform="translate(0.5)"/>
            </clipPath>
          </defs>
        </svg>
        )}
        <p className={`text-[10px]  font-Inter ${hash === "#contactss_ml" ? 'text-[#FF7A01]': `text-[#3B4255]`}  font-normal`}>Контакты</p>
      </div>
    </div>
  );
};

export default BottomMenu;
